<div class="container-xl">
  <h1 class="text-center my-2">Treehouses</h1>
  <div class="text-center"><%= link_to new_treehouse_path do %>
    <button class="btn btn-danger text-white">Offer treehouse</button>
    <% end %>
  </div>
  <div class="row">
    <div class="col-12 col-md-6">
      <div class="row">
        <% @treehouses.sort_by { |i| i.name.upcase }.each do |treehouse| %>
          <div class="col-6 col-sm-4 col-md-6" id="card_column">
            <%= link_to treehouse_path(treehouse) do %>
              <div class="card-treehouse">
                <%= cl_image_tag treehouse.photo.key, aspect_ratio: 1.77777777778, crop: :fill %>
                <div class="card-treehouse-overlay">
                  <div class="text-center w-100 h-100 d-flex justify-content-center align-items-end" >
                    <h4 style="text-shadow: black 0px 0px 8px" ><%= treehouse.name %></h4>        
                  </div>
                </div>
              </div>        
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="sticky-top">
        <div style="width: 100%; height: clamp(0vh, 70vh, 494.3125px)">
          <div id="map"
            data-markers="<%= @markers.to_json %>"
            data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
